(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{310:function(e,t,n){e.exports=n.p+"img/exhibition-modal-gnb.baf33c8.png"},311:function(e,t,n){e.exports=n.p+"img/gnb-count.9f47c9b.png"},320:function(t,n,r){"use strict";r.r(n);r(3),r(1),r(5),r(2),r(6);var o=r(21),c=r(0),l=(r(64),r(20),r(33),r(312),r(14),r(9),r(25),r(123),r(4),r(11),r(17),r(75)),d=r(313);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={computed:h(h(h({},Object(l.c)({exhibition:function(e){return e.modal.exhibition},user_idx:function(e){return e.userInfo.data.idx},userInfo:function(e){return e.userInfo}})),Object(l.b)({isLoggedIn:"isLoggedIn"})),{},{limitMoney:function(){return this.userInfo.data.money},visible:function(){return this.exhibition.show},exhibitionIdx:function(){var e="number"==typeof this.detail.idx&&this.detail.idx.toString();return 1===e.length?"0"+e:e},player:function(){return this.$refs.youtube.player},detailSub:function(){return this.detail.sub&&this.detail.sub.split("\n").join("<br />")},professorLabel:function(){return this.detail.professor?" | ".concat(this.detail.professor," 교수"):""},loginUserInvestExhibition:function(){var e=this.userInfo.investList;if("string"==typeof e)return{};var t=this.exhibition.idx;return e.find((function(e){return e.exhibition_idx===t}))||{}},isLoginUserInvestThisExhibition:function(){return!!Object.keys(this.loginUserInvestExhibition).length}}),created:function(){},watch:{visible:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return",t.resetData());case 3:return r=t.exhibition.idx,o="idx=".concat(r,"&user_idx=").concat(t.user_idx),n.next=7,t.$axios.get("/exhibition/exhibition_read.do?".concat(o));case 7:c=n.sent,t.detail=c.data,t.isLoginUserInvestThisExhibition&&(t.investMoney=t.loginUserInvestExhibition.invest_money),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),alert("오류가 발생했습니다. 다시 시도해주세요.");case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))()}},data:function(){return{videoId:Object(d.getIdFromUrl)("https://www.youtube.com/watch?v=gEKmAAqmegI"),detail:{},investMoney:""}},methods:{getIdFromUrl:d.getIdFromUrl,modifyInvest:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,/^(\s|\d)+$/.test(e.investMoney)){t.next=4;break}return t.abrupt("return",alert("숫자만 입력해주세요."));case 4:if("0"!=e.investMoney&&""!=e.investMoney){t.next=6;break}return t.abrupt("return",alert("투자금을 입력해주세요."));case 6:return n="exhibition_idx=".concat(e.detail.idx,"&re_invest=").concat(e.investMoney,"&user_idx=").concat(e.user_idx),t.next=9,e.$axios.get("/invest/invest_update_ok.do?".concat(n));case 9:return t.sent,t.next=12,e.$store.dispatch("REFRESH_USER_DATA");case 12:alert("작품에 투자되었습니다."),e.handleCloseModal(),t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:case"end":return t.stop()}}),t,null,[[0,16]])})))()},doInvest:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,/^(\s|\d)+$/.test(t.investMoney)){n.next=4;break}return n.abrupt("return",alert("숫자만 입력해주세요."));case 4:if(!("0"==t.investMoney||""==t.investMoney||t.investMoney<0||0==t.investMoney)){n.next=6;break}return n.abrupt("return",alert("투자금을 입력해주세요."));case 6:if(!(limitMoney<t.investMoney)){n.next=8;break}return n.abrupt("return",alert("더이상 투자할 수 없습니다."));case 8:if(!(limitMoney<parseInt(t.investMoney))){n.next=10;break}return n.abrupt("return",alert("더이상 투자할 수 없습니다."));case 10:return r="invest_money=".concat(t.investMoney,"&exhibition_sub=").concat(t.detail.sub,"&exhibition_idx=").concat(t.detail.idx,"&user_idx=").concat(t.user_idx),n.next=13,t.$axios.get("/invest/invest_insert_ok.do?".concat(r));case 13:return n.sent,n.next=16,t.$store.dispatch("REFRESH_USER_DATA");case 16:alert("작품에 투자되었습니다."),t.handleCloseModal(),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(0),cosnole.log(e);case 23:case"end":return n.stop()}}),n,null,[[0,20]])})))()},handleCloseModal:function(){this.$store.commit("toggleModal",{type:"exhibition",status:!1,idx:null}),this.$router.replace("/")},playVideo:function(){this.player.playVideo()},playing:function(){console.log("o/ we are watching!!!")},resetData:function(){this.detail={},this.investMoney=""}},components:{Youtube:d.Youtube}},x=r(63),component=Object(x.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("b-modal",{attrs:{visible:e.visible,"no-close-on-backdrop":!0,centered:"","modal-class":"exhibition-detail-modal"}},[n("div",{staticClass:"container"},[n("Youtube",{ref:"youtube",attrs:{"video-id":e.getIdFromUrl(e.detail.url)},on:{playing:e.playing}}),e._v(" "),n("div",{staticClass:"gnb-img"},[n("img",{attrs:{src:r(310)}}),e._v(" "),n("img",{staticClass:"gnb-count",attrs:{src:r(311)}}),e._v(" "),n("span",[e._v(e._s(e.exhibitionIdx))])]),e._v(" "),n("h3",{domProps:{innerHTML:e._s(e.detailSub)}}),e._v(" "),n("h4",[n("div",[n("span",{staticClass:"pro"},[e._v("지도교수")]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(e.detail.professor))])]),e._v(" "),n("div",{staticClass:"second"},[n("span",{staticClass:"pro"},[e._v("팀원")]),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(e.detail.member))])])]),e._v(" "),n("p",{domProps:{innerHTML:e._s(e.detail.comment)}})],1),e._v(" "),n("div",{staticClass:"bottom-btns"},[n("div",{staticClass:"close-btn"},[n("button",{on:{click:e.handleCloseModal}},[e._v("닫기")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],staticClass:"invest"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.investMoney,expression:"investMoney"}],attrs:{type:"text",placeholder:"10000"},domProps:{value:e.investMoney},on:{input:function(t){t.target.composing||(e.investMoney=t.target.value)}}}),e._v(" "),n("span",{staticClass:"input-unit"},[e._v("￦")]),e._v(" "),e.isLoginUserInvestThisExhibition?n("button",{on:{click:e.modifyInvest}},[e._v("투자금 수정")]):n("button",{on:{click:e.doInvest}},[e._v("투자하기")])])])])],1)}),[],!1,null,null,null);n.default=component.exports}}]);